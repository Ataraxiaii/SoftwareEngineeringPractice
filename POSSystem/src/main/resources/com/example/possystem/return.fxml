<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="com.example.possystem.controller.ReturnController" prefWidth="900" prefHeight="600" style="-fx-background-color: #f4f4f4;">
    <top>
        <VBox alignment="CENTER" spacing="5" style="-fx-background-color: #2c3e50; -fx-padding: 20;">
            <Label text="RETURN &amp; REFUND PROCESSING" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: white;"/>
            <HBox spacing="10" alignment="CENTER" style="-fx-padding: 10 0 0 0;">
                <TextField fx:id="searchField" promptText="Enter Invoice ID..." prefWidth="320" style="-fx-padding: 8;"/>
                <Button text="SEARCH" onAction="#searchRecords" style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-padding: 8 25; -fx-font-weight: bold;"/>
            </HBox>
        </VBox>
    </top>
    <center>
        <HBox spacing="15" style="-fx-padding: 15;">
            <VBox spacing="10" prefWidth="430">
                <GridPane hgap="10" vgap="8" style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 5; -fx-border-color: #bbdefb;">
                    <columnConstraints>
                        <ColumnConstraints minWidth="100" prefWidth="110" />
                        <ColumnConstraints hgrow="ALWAYS" />
                    </columnConstraints>
                    <Label text="Customer:" style="-fx-font-weight: bold;" GridPane.rowIndex="0"/>
                    <Label fx:id="customerNameLabel" text="-" GridPane.columnIndex="1" GridPane.rowIndex="0"/>
                    <Label text="Phone:" style="-fx-font-weight: bold;" GridPane.rowIndex="1"/>
                    <Label fx:id="customerPhoneLabel" text="-" GridPane.columnIndex="1" GridPane.rowIndex="1"/>
                    <Label text="Purchase Time:" style="-fx-font-weight: bold;" GridPane.rowIndex="2"/>
                    <Label fx:id="purchaseTimeLabel" text="-" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                </GridPane>
                <VBox spacing="5" VBox.vgrow="ALWAYS">
                    <Label text="1. Original Purchased Items" style="-fx-font-weight: bold; -fx-text-fill: #27ae60;"/>
                    <TableView fx:id="originalItemsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="originalNameCol" text="Item Name" prefWidth="150"/>
                            <TableColumn fx:id="originalPriceCol" text="Price" prefWidth="80"/>
                            <TableColumn fx:id="originalQtyCol" text="Qty" prefWidth="60"/>
                        </columns>
                        <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                    </TableView>
                </VBox>
                <VBox spacing="5" prefHeight="150">
                    <Label text="2. Return/Refund History" style="-fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
                    <TextArea fx:id="historyReturnArea" VBox.vgrow="ALWAYS" editable="false" wrapText="true" style="-fx-font-family: 'Monospaced'; -fx-font-size: 11;"/>
                </VBox>
            </VBox>
            <VBox spacing="10" HBox.hgrow="ALWAYS" style="-fx-background-color: white; -fx-padding: 15; -fx-border-color: #dcdde1;">
                <Label text="3. Current Return List" style="-fx-font-weight: bold;"/>
                <Separator/>
                <HBox spacing="10" alignment="BOTTOM_LEFT">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Select Product:"/>
                        <ComboBox fx:id="productComboBox" promptText="Select item" maxWidth="Infinity"/>
                    </VBox>
                    <VBox spacing="5">
                        <Label text="Qty:"/>
                        <TextField fx:id="inputReturnQty" prefWidth="70"/>
                    </VBox>
                    <Button text="ADD" onAction="#addItemToCurrentReturn" style="-fx-background-color: #e67e22; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 20;"/>
                </HBox>
                <TableView fx:id="returnItemsTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="returnNameCol" text="Item" prefWidth="160"/>
                        <TableColumn fx:id="returnQtyCol" text="Return Qty" prefWidth="80"/>
                        <TableColumn fx:id="returnSubtotalCol" text="Refund" prefWidth="90"/>
                    </columns>
                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                </TableView>
                <VBox spacing="8" style="-fx-background-color: #fffde7; -fx-padding: 12; -fx-border-color: #fbc02d;">
                    <Label text="Reason for Return:" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="returnReasonField" promptText="Enter reason..."/>
                </VBox>
            </VBox>
        </HBox>
    </center>
    <bottom>
        <HBox spacing="20" alignment="CENTER_RIGHT" style="-fx-padding: 15 25; -fx-background-color: white; -fx-border-color: #dcdde1; -fx-border-width: 1 0 0 0;">
            <VBox alignment="CENTER_LEFT">
                <Label text="TOTAL REFUND" style="-fx-font-size: 11px; -fx-text-fill: #7f8c8d;"/>
                <Label fx:id="totalRefundLabel" text="0.00" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #e74c3c;"/>
            </VBox>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="CANCEL" onAction="#goBack" style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-padding: 12 25;"/>
            <Button text="PROCESS RETURN" onAction="#processReturn" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 12 40;"/>
        </HBox>
    </bottom>
</BorderPane>